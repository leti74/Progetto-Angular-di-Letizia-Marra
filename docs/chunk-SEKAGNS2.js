import{c as Q}from"./chunk-NQDR2IZU.js";import{a as oe,b as ne,c as se,d as ae,e as le,f as me}from"./chunk-U3QEOMXM.js";import"./chunk-RLN6VN4F.js";import{$ as A,B as R,Bc as p,Cc as w,Dc as y,E as V,Ea as f,Ec as D,Fc as Z,Gc as ee,Hc as te,Ic as F,Kb as g,Lc as ie,Mc as I,Nc as N,Pa as q,Qa as B,Ra as L,Rc as re,Sa as $,Sc as x,Ta as m,Ua as i,Va as t,Wa as b,_ as P,_a as z,ab as d,bb as O,ha as j,ic as h,lb as H,mb as r,nb as _,nc as W,ob as J,qa as s,qb as K,qc as X,rc as C,sa as G,sc as Y,uc as S,vc as v,xc as U,ya as u,yc as M,zc as E}from"./chunk-STHPKCMU.js";var ge=(a,n)=>n.id;function ve(a,n){if(a&1){let e=z();i(0,"div",1)(1,"div",3)(2,"h3",4),r(3),t(),i(4,"p",5),r(5),t()(),i(6,"div",6)(7,"p")(8,"strong"),r(9,"Gender:"),t(),i(10,"span",7),r(11),t()(),i(12,"p")(13,"strong"),r(14,"Status:"),t(),i(15,"span"),r(16),t()()(),i(17,"div",8)(18,"button",9),d("click",function(){let l=P(e).$implicit,c=O();return A(c.goToUserDetail(l.id))}),i(19,"mat-icon",10),r(20,"visibility"),t()(),i(21,"button",11),d("click",function(l){let c=P(e).$implicit,ce=O();return A(ce.deleteUser(c.id,l))}),i(22,"mat-icon",12),r(23,"delete"),t()()()()}if(a&2){let e=n.$implicit;s(3),_(e.name),s(2),_(e.email),s(6),_(e.gender),s(4),H(K(` py-1 rounded-full text-white text-sm
                    `,e.status==="active"?"text-green-500!":"text-rose-500!")),s(),J(" ",e.status," ")}}function xe(a,n){a&1&&(i(0,"div",2)(1,"mat-icon"),r(2,"info"),t(),i(3,"p"),r(4,"No users found"),t()())}var T=class a{constructor(n){this.usersServices=n}users=[];id=new G;userIdDeleted=new G;goToUserDetail(n){this.id.emit(n)}deleteUser(n,e){e.stopPropagation(),this.usersServices.deleteUser(n).subscribe(o=>{o&&this.userIdDeleted.emit(n)})}static \u0275fac=function(e){return new(e||a)(u(N))};static \u0275cmp=f({type:a,selectors:[["app-user-card"]],inputs:{users:"users"},outputs:{id:"id",userIdDeleted:"userIdDeleted"},decls:4,vars:1,consts:[[1,"mt-7","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8","px-3"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-md","transition-shadow","p-5","flex","border-2","border-gray-50","flex-col","justify-between"],[1,"no-data","flex","items-center","justify-center","mt-10","text-gray-500","space-x-2"],[1,"mb-4"],[1,"text-2xl","font-semibold","text-[#0055a5]","mb-4"],[1,"text-gray-400","text-sm"],[1,"mb-4","space-y-2"],[1,"text-gray-400","ml-1"],[1,"flex","gap-3","mt-auto"],[1,"p-2","rounded-lg","hover:bg-gray-200","transition",3,"click"],[1,"text-[#0055a5]"],[1,"p-2","rounded-lg","hover:bg-red-100","transition",3,"click"],[1,"text-red-600"]],template:function(e,o){e&1&&(i(0,"div",0),L(1,ve,24,7,"div",1,ge),t(),q(3,xe,5,0,"div",2)),e&2&&(s(),$(o.users),s(2),B(o.users.length?-1:3))},dependencies:[x,h,Y,g],encapsulation:2})};var k=class a{constructor(n){this.dialogRef=n}userForm=new E({name:new p("",v.required),email:new p("",[v.required,v.email]),gender:new p("male",v.required),status:new p("active",v.required)});save(){this.userForm.valid&&this.dialogRef.close(this.userForm.value)}cancel(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||a)(u(le))};static \u0275cmp=f({type:a,selectors:[["app-add-user-dialog"]],decls:32,vars:2,consts:[["mat-dialog-title","",1,"p-4"],[1,"flex","flex-col","gap-3","p-4",3,"formGroup"],["matInput","","formControlName","name","placeholder","Enter your name"],["matInput","","formControlName","email","placeholder","Enter your email"],["formControlName","gender"],["value","male"],["value","female"],["formControlName","status"],["value","active"],["value","inactive"],[1,"flex","justify-end","gap-2","mt-3"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,o){e&1&&(i(0,"h2",0),r(1,"Add new user"),t(),i(2,"form",1)(3,"mat-form-field")(4,"mat-label"),r(5,"Name"),t(),b(6,"input",2),t(),i(7,"mat-form-field")(8,"mat-label"),r(9,"Email"),t(),b(10,"input",3),t(),i(11,"mat-form-field")(12,"mat-label"),r(13,"Gender"),t(),i(14,"mat-select",4)(15,"mat-option",5),r(16,"Male"),t(),i(17,"mat-option",6),r(18,"Female"),t()()(),i(19,"mat-form-field")(20,"mat-label"),r(21,"Status"),t(),i(22,"mat-select",7)(23,"mat-option",8),r(24,"Active"),t(),i(25,"mat-option",9),r(26,"Inactive"),t()()(),i(27,"div",10)(28,"button",11),d("click",function(){return o.cancel()}),r(29,"Cancel"),t(),i(30,"button",12),d("click",function(){return o.save()}),r(31,"Save"),t()()()),e&2&&(s(2),m("formGroup",o.userForm),s(28),m("disabled",o.userForm.invalid))},dependencies:[g,F,w,S,U,M,y,D,C,X,W,I,ie,ae,se,ne,x,re],encapsulation:2})};var pe=class a{constructor(n,e,o){this.usersService=n;this.router=e;this.dialog=o}usersForm;users=j([]);allUsers=[];ngOnInit(){this.usersForm=new E({nameEmail:new p(""),forPage:new p(10)}),this.loadUsers(),this.usersForm.get("forPage")?.valueChanges.subscribe(()=>{this.loadUsers()}),this.usersForm.get("nameEmail")?.valueChanges.pipe(R(300),V()).subscribe(n=>{let e=n.trim().toLowerCase();if(!e){this.users.set(this.allUsers);return}let o=this.allUsers.filter(l=>l.name.toLowerCase().includes(e)||l.email.toLowerCase().includes(e));this.users.set(o)})}loadUsers(n=1){let e=this.usersForm.get("forPage")?.value||10;this.usersService.getUsers(n,e).subscribe(o=>{this.allUsers=o,this.users.set(o)})}goToUserDetail(n){this.router.navigate(["user",n])}addUser(){this.dialog.open(k,{width:"400px"}).afterClosed().subscribe(e=>{e&&(console.log(e),this.usersService.addUser(e).subscribe(o=>{if(o){let l=[o,...this.users()];this.allUsers=l,this.users.set(l)}}))})}userDelete(n){let e=this.users().filter(o=>o.id!==n);this.users.set(e)}static \u0275fac=function(e){return new(e||a)(u(N),u(Q),u(me))};static \u0275cmp=f({type:a,selectors:[["app-users"]],decls:23,vars:6,consts:[[1,"users-page"],[1,"flex!","flex-wrap!","flex-row!","gap-3!","items-center!","pr-10!","pl-7!","mb-10!",3,"formGroup"],[1,"flex","flex-col","gap-2"],["type","text","formControlName","nameEmail","placeholder","Name or email",1,"px-4!","py-2!","border!","border-gray-300!","rounded-lg!","outline-0"],["formControlName","forPage",1,"px-4!","py-2!","border!","border-gray-300!","rounded-lg!","outline-0"],[3,"value"],[1,"flex","flex-row"],["label","Add User","icon","person-add",1,"mt-7",3,"btnClick"],[1,"w-auto"],[3,"id","userIdDeleted","users"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div")(2,"form",1)(3,"div",2)(4,"label"),r(5,"Search user"),t(),b(6,"input",3),t(),i(7,"div",2)(8,"label"),r(9,"Users for page"),t(),i(10,"select",4)(11,"option",5),r(12,"5"),t(),i(13,"option",5),r(14,"10"),t(),i(15,"option",5),r(16,"25"),t(),i(17,"option",5),r(18,"50"),t()()(),i(19,"div",6)(20,"app-button",7),d("btnClick",function(){return o.addUser()}),t()()(),i(21,"div",8)(22,"app-user-card",9),d("id",function(c){return o.goToUserDetail(c)})("userIdDeleted",function(c){return o.userDelete(c)}),t()()()()),e&2&&(s(2),m("formGroup",o.usersForm),s(9),m("value",5),s(2),m("value",10),s(2),m("value",25),s(2),m("value",50),s(5),m("users",o.users()))},dependencies:[C,I,F,w,ee,te,S,Z,U,M,y,D,x,h,g,oe,T],styles:[".users-page[_ngcontent-%COMP%]{padding:2.3rem 1.5rem 1.5rem;display:flex;flex-direction:column;gap:1rem}.users-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;width:100%;max-width:100%;box-sizing:border-box}.search-field[_ngcontent-%COMP%]{flex:1;min-width:250px}@media (max-width: 600px){.users-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}form[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-field[_ngcontent-%COMP%]{width:100%;min-width:unset}}"]})};export{pe as Users};
