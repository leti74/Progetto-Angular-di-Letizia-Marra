import{c as Q}from"./chunk-7YYG5JAK.js";import{a as oe,b as ne,c as ae,d as se,e as le,f as me}from"./chunk-4WFLFYZM.js";import{i as de,j as ue}from"./chunk-UDETO42H.js";import{$ as x,Ac as b,B as L,Cc as F,Dc as I,E as q,Ec as N,Fa as v,Gc as p,Hc as T,Ic as k,Jc as P,Kc as Z,Lc as ee,Mc as te,Nc as V,Ob as C,Qa as S,Qc as ie,Ra as U,Rc as A,Sa as $,Sc as G,Ta as z,Ua as m,Va as i,Wa as t,Wc as re,Xa as _,Xc as h,_ as g,ab as M,cb as d,db as c,ia as B,mc as E,nb as H,ob as o,pb as w,qb as J,ra as s,sb as K,sc as W,ta as j,vc as X,wc as y,xc as Y,za as u,zc as D}from"./chunk-T5GEWLYA.js";var ve=(a,r)=>r.id;function _e(a,r){if(a&1){let e=M();i(0,"div",1)(1,"div",3)(2,"h3",4),o(3),t(),i(4,"p",5),o(5),t()(),i(6,"div",6)(7,"p")(8,"strong"),o(9,"Gender:"),t(),i(10,"span",7),o(11),t()(),i(12,"p")(13,"strong"),o(14,"Status:"),t(),i(15,"span"),o(16),t()()(),i(17,"div",8)(18,"button",9),d("click",function(){let l=g(e).$implicit,f=c();return x(f.goToUserDetail(l.id))}),i(19,"mat-icon",10),o(20,"visibility"),t()(),i(21,"button",11),d("click",function(l){let f=g(e).$implicit,ge=c();return x(ge.deleteUser(f.id,l))}),i(22,"mat-icon",12),o(23,"delete"),t()()()()}if(a&2){let e=r.$implicit;s(3),w(e.name),s(2),w(e.email),s(6),w(e.gender),s(4),H(K(` py-1 rounded-full text-white text-sm
                    `,e.status==="active"?"text-green-500!":"text-rose-500!")),s(),J(" ",e.status," ")}}function Ce(a,r){a&1&&(i(0,"div",2)(1,"mat-icon"),o(2,"info"),t(),i(3,"p"),o(4,"No users found"),t()())}var O=class a{constructor(r){this.usersServices=r}users=[];id=new j;userIdDeleted=new j;goToUserDetail(r){this.id.emit(r)}deleteUser(r,e){e.stopPropagation(),this.usersServices.deleteUser(r).subscribe(n=>{n&&this.userIdDeleted.emit(r)})}static \u0275fac=function(e){return new(e||a)(u(G))};static \u0275cmp=v({type:a,selectors:[["app-user-card"]],inputs:{users:"users"},outputs:{id:"id",userIdDeleted:"userIdDeleted"},decls:4,vars:1,consts:[[1,"mt-7","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8","px-10"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-md","transition-shadow","p-5","flex","border-2","border-gray-50","flex-col","justify-between"],[1,"no-data","flex","items-center","justify-center","mt-10","text-gray-500","space-x-2"],[1,"mb-4"],[1,"text-2xl","font-semibold","text-[#0055a5]","mb-4"],[1,"text-gray-400","text-sm"],[1,"mb-4","space-y-2"],[1,"text-gray-400","ml-1"],[1,"flex","gap-3","mt-auto"],[1,"p-2","rounded-lg","hover:bg-gray-200","transition",3,"click"],[1,"text-[#0055a5]"],[1,"p-2","rounded-lg","hover:bg-red-100","transition",3,"click"],[1,"text-red-600"]],template:function(e,n){e&1&&(i(0,"div",0),$(1,_e,24,7,"div",1,ve),t(),S(3,Ce,5,0,"div",2)),e&2&&(s(),z(n.users),s(2),U(n.users.length?-1:3))},dependencies:[h,E,Y,C],encapsulation:2})};var R=class a{constructor(r){this.dialogRef=r}userForm=new N({name:new p("",b.required),email:new p("",[b.required,b.email]),gender:new p("male",b.required),status:new p("active",b.required)});save(){this.userForm.valid&&this.dialogRef.close(this.userForm.value)}cancel(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||a)(u(le))};static \u0275cmp=v({type:a,selectors:[["app-add-user-dialog"]],decls:32,vars:2,consts:[["mat-dialog-title","",1,"p-4"],[1,"flex","flex-col","gap-3","p-4",3,"formGroup"],["matInput","","formControlName","name","placeholder","Enter your name"],["matInput","","formControlName","email","placeholder","Enter your email"],["formControlName","gender"],["value","male"],["value","female"],["formControlName","status"],["value","active"],["value","inactive"],[1,"flex","justify-end","gap-2","mt-3"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"]],template:function(e,n){e&1&&(i(0,"h2",0),o(1,"Add new user"),t(),i(2,"form",1)(3,"mat-form-field")(4,"mat-label"),o(5,"Name"),t(),_(6,"input",2),t(),i(7,"mat-form-field")(8,"mat-label"),o(9,"Email"),t(),_(10,"input",3),t(),i(11,"mat-form-field")(12,"mat-label"),o(13,"Gender"),t(),i(14,"mat-select",4)(15,"mat-option",5),o(16,"Male"),t(),i(17,"mat-option",6),o(18,"Female"),t()()(),i(19,"mat-form-field")(20,"mat-label"),o(21,"Status"),t(),i(22,"mat-select",7)(23,"mat-option",8),o(24,"Active"),t(),i(25,"mat-option",9),o(26,"Inactive"),t()()(),i(27,"div",10)(28,"button",11),d("click",function(){return n.cancel()}),o(29,"Cancel"),t(),i(30,"button",12),d("click",function(){return n.save()}),o(31,"Save"),t()()()),e&2&&(s(2),m("formGroup",n.userForm),s(28),m("disabled",n.userForm.invalid))},dependencies:[C,V,T,D,F,I,k,P,y,X,W,A,ie,se,ae,ne,h,re],encapsulation:2})};function Se(a,r){a&1&&(i(0,"div",8),_(1,"mat-progress-spinner",10),t())}function Ue(a,r){if(a&1){let e=M();i(0,"app-user-card",13),d("id",function(l){g(e);let f=c(2);return x(f.goToUserDetail(l))})("userIdDeleted",function(l){g(e);let f=c(2);return x(f.userDelete(l))}),t()}if(a&2){let e=c(2);m("users",e.users())}}function Me(a,r){a&1&&(i(0,"p",12),o(1,"No Users found"),t())}function we(a,r){if(a&1&&(i(0,"div",9),S(1,Ue,1,1,"app-user-card",11)(2,Me,2,0,"p",12),t()),a&2){let e=c();s(),U(e.users().length>0?1:2)}}var fe=class a{constructor(r,e,n){this.usersService=r;this.router=e;this.dialog=n}usersForm;users=B([]);allUsers=[];isLoading=!1;ngOnInit(){this.usersForm=new N({nameEmail:new p(""),forPage:new p(10)}),this.loadUsers(),this.usersForm.get("forPage")?.valueChanges.subscribe(()=>{this.loadUsers()}),this.usersForm.get("nameEmail")?.valueChanges.pipe(L(300),q()).subscribe(r=>{let e=r.trim().toLowerCase();if(!e){this.users.set(this.allUsers);return}let n=this.allUsers.filter(l=>l.name.toLowerCase().includes(e)||l.email.toLowerCase().includes(e));this.users.set(n)})}loadUsers(r=1){let e=this.usersForm.get("forPage")?.value||10;this.isLoading=!0,this.usersService.getUsers(r,e).subscribe({next:n=>{this.allUsers=n,this.users.set(n),this.isLoading=!1},error:()=>{this.isLoading=!1}})}goToUserDetail(r){this.router.navigate(["user",r])}addUser(){this.dialog.open(R,{width:"400px"}).afterClosed().subscribe(e=>{e&&(console.log(e),this.usersService.addUser(e).subscribe(n=>{if(n){let l=[n,...this.users()];this.allUsers=l,this.users.set(l)}}))})}userDelete(r){let e=this.users().filter(n=>n.id!==r);this.users.set(e)}static \u0275fac=function(e){return new(e||a)(u(G),u(Q),u(me))};static \u0275cmp=v({type:a,selectors:[["app-users"]],decls:22,vars:6,consts:[[1,"users-page"],[1,"flex","flex-col","mt-10"],[1,"flex","flex-wrap","gap-3","items-center","px-8","mb-10","w-full","md:w-auto","md:max-w-4xl","mx-auto",3,"formGroup"],[1,"flex","flex-col","gap-2","w-full","sm:w-auto"],["type","text","formControlName","nameEmail","placeholder","Name or email",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","outline-0"],["formControlName","forPage",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","outline-0"],[3,"value"],["label","Add User","icon","person-add",1,"mt-5",3,"btnClick"],[1,"flex","justify-center","mt-30"],[1,"w-auto"],["mode","indeterminate","diameter","40","color","primary"],[3,"users"],[1,"text-center","mt-10","text-gray-500"],[3,"id","userIdDeleted","users"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"label"),o(5,"Search user"),t(),_(6,"input",4),t(),i(7,"div",3)(8,"label"),o(9,"Users for page"),t(),i(10,"select",5)(11,"option",6),o(12,"5"),t(),i(13,"option",6),o(14,"10"),t(),i(15,"option",6),o(16,"25"),t(),i(17,"option",6),o(18,"50"),t()()(),i(19,"app-button",7),d("btnClick",function(){return n.addUser()}),t()()(),S(20,Se,2,0,"div",8)(21,we,3,1,"div",9),t()),e&2&&(s(2),m("formGroup",n.usersForm),s(9),m("value",5),s(2),m("value",10),s(2),m("value",25),s(2),m("value",50),s(3),U(n.isLoading?20:21))},dependencies:[y,A,V,T,ee,te,D,Z,F,I,k,P,h,E,C,oe,O,ue,de],styles:[".users-page[_ngcontent-%COMP%]{padding-top:2.3rem;display:flex;flex-direction:column;gap:1rem}.users-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;width:100%;max-width:100%;box-sizing:border-box}.search-field[_ngcontent-%COMP%]{flex:1;min-width:250px}@media (max-width: 600px){.users-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem}form[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-field[_ngcontent-%COMP%]{width:100%;min-width:unset}}"]})};export{fe as Users};
