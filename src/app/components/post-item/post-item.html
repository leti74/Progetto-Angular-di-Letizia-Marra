<div class="bg-gray-100 rounded-xl w-full sm:max-w-3xl p-4 pb-5">


    <div class="p-4">
        <h3 class="text-lg font-semibold text-gray-900 mt-2 wrap-break-word">
            {{ post.title }}
        </h3>

        <p class="text-gray-700 leading-relaxed mb-4 wrap-break-word">
            {{ post.body }}
        </p>
    </div>


    <mat-expansion-panel class="w-full">

        <mat-expansion-panel-header class="px-4 py-2 w-full">
            <mat-panel-title class="font-medium text-[#0055a5] w-full wrap-break-word">
                Comments ({{ post.comments?.length || 0 }})
            </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="px-4 py-4 bg-gray-50 w-full">


            @if ((post.comments?.length ?? 0) > 0) {

            <div class="flex flex-col gap-4 w-full">
                @for (comment of post.comments; track comment.id) {
                <p class="text-gray-800 text-sm wrap-break-word">
                    <strong>{{ comment.email }}:</strong> {{ comment.body }}
                </p>
                }
            </div>


            <form [formGroup]="commentForm" class="flex flex-col gap-4 mt-6 w-full">
                <div class="flex flex-col w-full">
                    <label class="mb-2 text-gray-700 font-medium">
                        New comment
                    </label>

                    <input formControlName="body" placeholder="Write a comment..." class="bg-gray-100 w-full px-4 py-2 border border-gray-300 rounded-lg
                       focus:outline-none focus:ring-2 focus:ring-[#0055a5]/40
                       focus:border-[#0055a5] transition" />
                </div>

                <button mat-raised-button color="primary" class="bg-[#0055a5] hover:bg-[#004080] text-white px-5 py-2
                     rounded-lg shadow transition w-full sm:w-auto" (click)="addComment(post.id)">
                    Send
                </button>
            </form>

            }


            @else {

            <div class="text-center text-gray-600 mb-4 font-medium">
                No comments yet â€” be the first to write one!
            </div>

            <form [formGroup]="commentForm" class="flex flex-col gap-4 w-full sm:max-w-xl mx-auto">
                <div class="flex flex-col w-full">
                    <label class="mb-2 text-gray-700 font-medium">
                        New comment
                    </label>

                    <input formControlName="body" placeholder="Write a comment..." class="bg-gray-100 w-full px-4 py-2 border border-gray-300 rounded-lg
                       focus:outline-none focus:ring-2 focus:ring-[#0055a5]/40
                       focus:border-[#0055a5] transition" />
                </div>

                <button mat-raised-button color="primary" class="bg-[#0055a5] hover:bg-[#004080] text-white px-5 py-2
                     rounded-lg shadow transition w-full sm:w-auto" (click)="addComment(post.id)">
                    Send
                </button>
            </form>

            }

        </div>

    </mat-expansion-panel>
</div>