<mat-card class=" border-none! bg-transparent! shadow-none!">

    <mat-card-title class=" mb-10! ">
        <span class=" text-2xl text-center! mb-2 text-[#0055a5]! border-b! border-[#0055a5]!">User post</span>
    </mat-card-title>

    @if(!posts.length){
    <p class="ml-5!">No posts</p>
    }

    <mat-card-content class="flex! flex-col! gap-8!  ">
        @for (post of posts; track $index) {

        <div class="pb-10! pt-0!" [ngStyle]="posts.length>1 ? {'border-bottom': '1px solid #D1D5DB '} : {}">

            <h3 class="text-lg! font-semibold! text-gray-900! mb-2!">{{ post.title }}</h3>
            <p class="text-gray-700! leading-relaxed! mb-4!">{{ post.body }}</p>

            <mat-expansion-panel
                class="  rounded-lg! shadow-sm! hover:shadow-md! transition-shadow! duration-200 border! border-gray-200 max-w-4xl">

                <mat-expansion-panel-header class=" px-4! py-2!">
                    <mat-panel-title class="font-medium! text-[#0055a5]!">
                        Comments ({{ post.comments?.length || 0 }})
                    </mat-panel-title>
                </mat-expansion-panel-header>

                <div class="px-4! py-4! bg-gray-50! ">

                    @for (comment of post.comments; track comment.id) {
                    <div
                        class="mb-4! px-3! py-2! bg-gray-200! rounded-l! shadow-sm! flex! justify-between! items-center!">
                        <p class="text-gray-800! text-sm!">
                            <strong>{{ comment.name }}:</strong> {{ comment.body }}
                        </p>

                        @if (comment.email === 'you@example.com') {
                        <button mat-icon-button class="warn" (click)="deleteComment(post.id, comment.id!)">
                            <mat-icon>delete</mat-icon>
                        </button>
                        }
                    </div>
                    }


                    <div class="  p-5! bg-gray-200! border! border-gray-300! rounded-sm! shadow-inner!">

                        <form [formGroup]="commentForm" class="flex! flex-col! gap-4! ">

                            <div class="flex! flex-col!">
                                <label class="mb-5! text-gray-700! font-medium!">New comment</label>

                                <input formControlName="body" placeholder="Write a comment..." class="  bg-gray-100! w-full! px-4! py-2! mb-2 border! border-gray-300! rounded-lg!
                                           focus:outline-none!  focus:ring-[#0055a5]/40! 
                                           focus:border-[#0055a5]! transition!" />
                            </div>

                            <button mat-raised-button color="primary" class="self-start! bg-[#0055a5]! hover:bg-[#004080]! text-white!
                                       px-5! py-2! rounded-lg! shadow! transition!" (click)="addComment(post.id)">
                                Send
                            </button>

                        </form>

                    </div>


                </div>
            </mat-expansion-panel>

        </div>
        }
    </mat-card-content>

</mat-card>